[unstable]
build-std-features = ["compiler-builtins-mem"]
build-std = ["core", "compiler_builtins"]

[env]
ESP_HAL_CONFIG_PLACE_ANON_IN_RAM = "true"

[build]
target = "arch/riscv32imc-unknown-none-elf.json"

[target.riscv32imc-unknown-none-elf]
rustflags = [
  # Give linker.ld file
  "-C",
  "link-arg=linker.ld",
  # Static compilation
  "-C",
  "link-arg=-static",
  "-C",
  "relocation-model=static",
  # Keep debug sym
  "-C",
  "debuginfo=2",
  "-C",
  "panic=abort",
  "-Clink-arg=--print-memory-usage",
]

[profile.dev]
opt-level = 0
debug = true
lto = false
codegen-units = 1
